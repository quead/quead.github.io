import{m as qs,r as b,j as e,n as vs,p as _s}from"./vendor-CfEyJeqA.js";import{c as Xs,p as et,a as st}from"./zustand-iztU4bvL.js";import{f as qe}from"./date-fns-D5ebMS61.js";import{t as tt}from"./tailwind-merge-COJ8Fh6m.js";import{S as at,P as rt,C as js,a as it,R as nt,T as lt,O as ws,b as ys,c as ot,d as Ns,D as Is,e as Cs,f as ct,g as dt,h as Ss,i as ks,I as mt,j as ht,k as As,V as xt,l as Ps,m as ut,n as pt,L as Ts,o as Ms,p as ft,q as gt,r as Rs,s as bt,t as Ds,u as vt,v as jt,w as wt}from"./radix-ui-CPvycv4P.js";import{C as yt,A as Nt,V as be,P as ve,I as Se,S as It,E as _e,a as Ct,b as rs,c as zs,d as re,e as je,f as Ue,g as se,M as we,h as St,i as is,X as Xe,U as kt,R as At,F as Pt,j as Tt,k as Mt,T as Re,l as Rt,m as Dt,n as zt,o as Ut,p as Et,q as Us,r as Es,s as Os,G as Ot,t as Lt,u as Be,v as Ft,w as Bt,L as ns,D as Ze,x as Ls,y as Fs,z as Zt,B as Ht,H as Gt,J as Vt,K as $t}from"./lucide-zXqygxwM.js";import{u as Wt,a as ls,D as Yt,c as Jt,S as Qt,v as Kt,b as os,T as qt,P as _t,d as Xt,C as ea}from"./dnd-kit-DoB29dzL.js";import{t as sa,a as ta}from"./html-to-image-CTmFV8_f.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();const _=[{id:"whatsapp",name:"WhatsApp",bubbleStyle:"rounded",headerStyle:"full",fonts:{header:'-apple-system, "SF Pro Text", "Helvetica Neue", Arial, sans-serif',body:'-apple-system, "SF Pro Text", "Helvetica Neue", Arial, sans-serif'},radius:"1.25rem",showAvatars:!0,showStatus:!0,themes:[{id:"light",name:"Light",colors:{background:"#ece5dd",surface:"#f0f2f5",header:"#075e54",headerText:"#f6f7f7",bubbleSent:"#dcf8c6",bubbleSentText:"#111b21",bubbleReceived:"#ffffff",bubbleReceivedText:"#111b21",input:"#ffffff",inputText:"#111b21",accent:"#25d366",muted:"#667781",border:"#d1d7db"},pattern:"url('/assets/whatsapp-light.webp')"},{id:"dark",name:"Dark",colors:{background:"#0b141a",surface:"#202c33",header:"#202c33",headerText:"#e9edef",bubbleSent:"#005c4b",bubbleSentText:"#e9edef",bubbleReceived:"#202c33",bubbleReceivedText:"#e9edef",input:"#2a3942",inputText:"#e9edef",accent:"#00a884",muted:"#8696a0",border:"#2a3942"},pattern:"url('/assets/whatsapp-dark.webp')"}]},{id:"imessage",name:"iMessage",bubbleStyle:"rounded",headerStyle:"compact",fonts:{header:'-apple-system, "SF Pro Text", "Helvetica Neue", Arial, sans-serif',body:'-apple-system, "SF Pro Text", "Helvetica Neue", Arial, sans-serif'},radius:"1.5rem",showAvatars:!1,showStatus:!1,themes:[{id:"light",name:"Light",colors:{background:"#f2f2f7",surface:"#ffffff",header:"#f7f7f7",headerText:"#000000",bubbleSent:"#0a84ff",bubbleSentText:"#ffffff",bubbleReceived:"#e5e5ea",bubbleReceivedText:"#000000",input:"#ffffff",inputText:"#000000",accent:"#0a84ff",muted:"#8e8e93",border:"#d1d1d6"},pattern:"radial-gradient(circle at 1px 1px, rgba(0,0,0,0.06) 1px, transparent 0)"},{id:"dark",name:"Dark",colors:{background:"#000000",surface:"#1c1c1e",header:"#1c1c1e",headerText:"#f2f2f7",bubbleSent:"#0a84ff",bubbleSentText:"#ffffff",bubbleReceived:"#2c2c2e",bubbleReceivedText:"#f2f2f7",input:"#1c1c1e",inputText:"#f2f2f7",accent:"#0a84ff",muted:"#8e8e93",border:"#2c2c2e"},pattern:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0)"}]},{id:"snapchat",name:"Snapchat",bubbleStyle:"rounded",headerStyle:"compact",fonts:{header:'"Avenir Next", "Helvetica Neue", Arial, sans-serif',body:'"Avenir Next", "Helvetica Neue", Arial, sans-serif'},radius:"1.25rem",showAvatars:!1,showStatus:!1,themes:[{id:"light",name:"Light",colors:{background:"#ffffff",surface:"#ffffff",header:"#ffffff",headerText:"#0b0b0c",bubbleSent:"#1c89ff",bubbleSentText:"#ffffff",bubbleReceived:"#ff3b6d",bubbleReceivedText:"#0b0b0c",input:"#f1f2f4",inputText:"#0b0b0c",accent:"#fffc00",muted:"#8e8e93",border:"#e6e7ea"}},{id:"dark",name:"Dark",colors:{background:"#0b0b0c",surface:"#0f0f10",header:"#0f0f10",headerText:"#f5f5f7",bubbleSent:"#1c89ff",bubbleSentText:"#ffffff",bubbleReceived:"#ff3b6d",bubbleReceivedText:"#f5f5f7",input:"#1a1a1c",inputText:"#f5f5f7",accent:"#fffc00",muted:"#9aa0a6",border:"#1f1f22"}}]},{id:"messenger",name:"Facebook Messenger",bubbleStyle:"rounded",headerStyle:"full",fonts:{header:'-apple-system, "SF Pro Text", "Helvetica Neue", Arial, sans-serif',body:'-apple-system, "SF Pro Text", "Helvetica Neue", Arial, sans-serif'},radius:"1.25rem",showAvatars:!1,showStatus:!1,themes:[{id:"light",name:"Light",colors:{background:"#ffffff",surface:"#ffffff",header:"#ffffff",headerText:"#050505",bubbleSent:"#0084ff",bubbleSentText:"#ffffff",bubbleReceived:"#e4e6eb",bubbleReceivedText:"#050505",input:"#ffffff",inputText:"#050505",accent:"#0084ff",muted:"#8a8d91",border:"#e4e6eb"}},{id:"dark",name:"Dark",colors:{background:"#0b0b0c",surface:"#1c1e21",header:"#1c1e21",headerText:"#e4e6eb",bubbleSent:"#0084ff",bubbleSentText:"#ffffff",bubbleReceived:"#3a3b3c",bubbleReceivedText:"#e4e6eb",input:"#1c1e21",inputText:"#e4e6eb",accent:"#0084ff",muted:"#b0b3b8",border:"#2f3031"}}]},{id:"instagram",name:"Instagram",bubbleStyle:"rounded",headerStyle:"full",fonts:{header:'"Helvetica Neue", Arial, sans-serif',body:'"Helvetica Neue", Arial, sans-serif'},radius:"1.25rem",showAvatars:!1,showStatus:!0,themes:[{id:"light",name:"Light",colors:{background:"#ffffff",surface:"#ffffff",header:"#ffffff",headerText:"#111827",bubbleSent:"#7c3aed",bubbleSentText:"#ffffff",bubbleReceived:"#f1f2f4",bubbleReceivedText:"#111827",input:"#f3f4f6",inputText:"#111827",accent:"#3797f0",muted:"#6b7280",border:"#e5e7eb"}},{id:"dark",name:"Dark",colors:{background:"#0f1115",surface:"#111418",header:"#111418",headerText:"#f5f5f5",bubbleSent:"#7c3aed",bubbleSentText:"#ffffff",bubbleReceived:"#2b2f33",bubbleReceivedText:"#f5f5f5",input:"#1a1d22",inputText:"#f5f5f5",accent:"#3797f0",muted:"#9aa0a6",border:"#2a2d32"}}]},{id:"tinder",name:"Tinder",bubbleStyle:"rounded",headerStyle:"full",fonts:{header:'"Proxima Nova", "Avenir Next", "Helvetica Neue", sans-serif',body:'"Proxima Nova", "Avenir Next", "Helvetica Neue", sans-serif'},radius:"1.5rem",showAvatars:!1,showStatus:!1,themes:[{id:"light",name:"Light",colors:{background:"#ffffff",surface:"#ffffff",header:"#ffffff",headerText:"#101114",bubbleSent:"#fd5068",bubbleSentText:"#ffffff",bubbleReceived:"#ffffff",bubbleReceivedText:"#101114",input:"#ffffff",inputText:"#101114",accent:"#fd5068",muted:"#9aa0a6",border:"#e5e7eb"}},{id:"dark",name:"Dark",colors:{background:"#0f1115",surface:"#15181d",header:"#15181d",headerText:"#f5f5f5",bubbleSent:"#fd5068",bubbleSentText:"#ffffff",bubbleReceived:"#24262b",bubbleReceivedText:"#f5f5f5",input:"#15181d",inputText:"#f5f5f5",accent:"#fd5068",muted:"#9aa0a6",border:"#2b2e35"}}]}],cs=_[0].id,aa=s=>_.find(a=>a.id===s)??_[0],es=[{id:"iphone-14-pro",label:"iPhone 14 Pro",width:393,height:852,hint:"Mobile"},{id:"iphone-se",label:"iPhone SE",width:375,height:667,hint:"Compact"},{id:"android-standard",label:"Android Standard",width:360,height:800,hint:"Mobile"},{id:"ipad",label:"iPad",width:768,height:1024,hint:"Tablet"},{id:"instagram-story",label:"Instagram Story",width:1080,height:1920,hint:"Social"},{id:"desktop",label:"Desktop",width:1920,height:1080,hint:"Wide"}],ke=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`id-${Math.random().toString(36).slice(2,10)}`,He=s=>{try{return qe(new Date(s),"p")}catch{return""}},Ee=s=>{try{return qe(new Date(s),"MMM d, yyyy")}catch{return""}},ra=s=>{try{return qe(new Date(s),"d MMM 'AT' HH:mm").toUpperCase()}catch{return""}},X=(s,a,t)=>Math.min(Math.max(s,a),t),Bs=s=>{const a=s.participants.map(t=>t.name).filter(Boolean);return s.participants.length>2?s.groupName?.trim()||"Group Chat":a.length===0?"New Chat":a.length===1?a[0]:`${a[0]} & ${a[1]}`},Te=s=>new Promise((a,t)=>{const r=new FileReader;r.onload=()=>a(r.result),r.onerror=()=>t(r.error),r.readAsDataURL(s)}),Zs="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjAwIDIwMCI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImJnIiB4MT0iMCIgeTE9IjAiIHgyPSIxIiB5Mj0iMSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMzNGQzOTkiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzEwYjk4MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiByeD0iMTAwIiBmaWxsPSJ1cmwoI2JnKSIgLz4KICA8Y2lyY2xlIGN4PSI2OCIgY3k9Ijc4IiByPSIxOCIgZmlsbD0iI2ZmZmZmZiIgb3BhY2l0eT0iMC4yIiAvPgogIDxjaXJjbGUgY3g9IjEzMiIgY3k9IjYwIiByPSIxMiIgZmlsbD0iI2ZmZmZmZiIgb3BhY2l0eT0iMC4xNSIgLz4KICA8dGV4dAogICAgeD0iNTAlIgogICAgeT0iNTUlIgogICAgdGV4dC1hbmNob3I9Im1pZGRsZSIKICAgIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIKICAgIGZvbnQtc2l6ZT0iODQiCiAgICBmb250LXdlaWdodD0iNzAwIgogICAgZmlsbD0iI2ZmZmZmZiIKICA+CiAgICBBCiAgPC90ZXh0Pgo8L3N2Zz4K",Hs="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjAwIDIwMCI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImJnIiB4MT0iMCIgeTE9IjAiIHgyPSIxIiB5Mj0iMSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM2MGE1ZmEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzdjM2FlZCIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiByeD0iMTAwIiBmaWxsPSJ1cmwoI2JnKSIgLz4KICA8Y2lyY2xlIGN4PSI2NCIgY3k9IjcwIiByPSIxNiIgZmlsbD0iI2ZmZmZmZiIgb3BhY2l0eT0iMC4xOCIgLz4KICA8Y2lyY2xlIGN4PSIxMzgiIGN5PSI5MCIgcj0iMjAiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuMTIiIC8+CiAgPHRleHQKICAgIHg9IjUwJSIKICAgIHk9IjU1JSIKICAgIHRleHQtYW5jaG9yPSJtaWRkbGUiCiAgICBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiCiAgICBmb250LXNpemU9Ijg0IgogICAgZm9udC13ZWlnaHQ9IjcwMCIKICAgIGZpbGw9IiNmZmZmZmYiCiAgPgogICAgSgogIDwvdGV4dD4KPC9zdmc+Cg==",Ge=[{id:"p1",name:"Avery",status:"online",color:"#22c55e",avatarUrl:Zs},{id:"p2",name:"Jordan",status:"typing",color:"#0b84ff",avatarUrl:Hs}],ia={"https://i.pravatar.cc/100?img=12":Zs,"https://i.pravatar.cc/100?img=32":Hs},Ve=s=>s.map(a=>{if(!a.avatarUrl)return a;const t=ia[a.avatarUrl];return t?{...a,avatarUrl:t}:a}),ds=()=>{const s=new Date().toISOString();return{id:"conv-1",participants:Ve(Ge),messages:[{id:"m1",senderId:"p1",content:"Morning! I mocked up the chat simulator layout.",timestamp:s,type:"text",status:"read"},{id:"m2",senderId:"p2",content:"Nice. Can we preview it in WhatsApp and iMessage styles?",timestamp:s,type:"text",status:"read"},{id:"m3",senderId:"p1",content:"Yep, I wired both themes and an export panel.",timestamp:s,type:"text",status:"delivered"},{id:"m4",senderId:"p2",content:"System: Export is locked to 2x by default.",timestamp:s,type:"system",status:"sent"}],metadata:{createdAt:s,updatedAt:s}}},ms={presetId:"iphone-14-pro",width:393,height:852,scale:2,format:"png",quality:.95},hs={activeView:"editor",showChrome:!0,zoom:1,isSidebarOpen:!0,activePanel:"messages",autoFit:!0},Oe="chat-sim-storage",$e=3,We=s=>({conversation:s.conversation,layoutId:s.layoutId,themeId:s.themeId,activeParticipantId:s.activeParticipantId,backgroundImageUrl:s.backgroundImageUrl,backgroundImageOpacity:s.backgroundImageOpacity,backgroundColor:s.backgroundColor,exportSettings:s.exportSettings}),B=s=>({past:[...s.history.past,We(s)].slice(-$e),future:[]}),N=Xs()(et((s,a)=>({conversation:ds(),layoutId:cs,themeId:"light",activeParticipantId:Ge[0].id,backgroundImageUrl:"",backgroundImageOpacity:.35,backgroundColor:"",exportSettings:ms,ui:hs,history:{past:[],future:[]},lastAutosaveAt:null,setLayout:t=>s(r=>({layoutId:t,history:B(r)})),setTheme:t=>s(r=>({themeId:t,history:B(r)})),setActiveParticipant:t=>s(r=>({activeParticipantId:t,history:B(r)})),setBackgroundImageUrl:t=>s(r=>({backgroundImageUrl:t,history:B(r)})),setBackgroundImageOpacity:t=>s(r=>({backgroundImageOpacity:t,history:B(r)})),clearBackgroundImage:()=>s(t=>({backgroundImageUrl:"",history:B(t)})),setBackgroundColor:t=>s(r=>({backgroundColor:t,history:B(r)})),setLastAutosaveAt:t=>s({lastAutosaveAt:t}),addParticipant:t=>s(r=>{const i={id:ke(),...t},l=[...r.conversation.participants,i],m=l.length>2?r.conversation.groupName??"Group Chat":void 0;return{conversation:{...r.conversation,participants:l,groupName:m,metadata:{...r.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(r)}}),updateParticipant:(t,r)=>s(i=>({conversation:{...i.conversation,participants:i.conversation.participants.map(l=>l.id===t?{...l,...r}:l),metadata:{...i.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(i)})),removeParticipant:t=>s(r=>{const i=r.conversation.participants.filter(x=>x.id!==t),l=r.activeParticipantId===t&&i.length?i[0].id:r.activeParticipantId,m=i.length>2?r.conversation.groupName??"Group Chat":void 0;return{activeParticipantId:l,conversation:{...r.conversation,participants:i,messages:r.conversation.messages.filter(x=>x.senderId!==t),groupName:m,metadata:{...r.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(r)}}),setGroupName:t=>s(r=>({conversation:{...r.conversation,groupName:r.conversation.participants.length>2?t:void 0,metadata:{...r.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(r)})),addMessage:t=>s(r=>({conversation:{...r.conversation,messages:[...r.conversation.messages,{id:ke(),...t}],metadata:{...r.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(r)})),updateMessage:(t,r)=>s(i=>({conversation:{...i.conversation,messages:i.conversation.messages.map(l=>l.id===t?{...l,...r}:l),metadata:{...i.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(i)})),deleteMessage:t=>s(r=>({conversation:{...r.conversation,messages:r.conversation.messages.filter(i=>i.id!==t),metadata:{...r.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(r)})),duplicateMessage:t=>s(r=>{const i=r.conversation.messages.find(m=>m.id===t);if(!i)return r;const l={...i,id:ke(),timestamp:new Date().toISOString()};return{conversation:{...r.conversation,messages:[...r.conversation.messages,l],metadata:{...r.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(r)}}),setMessages:t=>s(r=>({conversation:{...r.conversation,messages:t,metadata:{...r.conversation.metadata,updatedAt:new Date().toISOString()}},history:B(r)})),setExportSettings:t=>s(r=>({exportSettings:{...r.exportSettings,...t},history:B(r)})),setUi:t=>s(r=>({ui:{...r.ui,...t}})),resetConversation:()=>s(t=>({conversation:ds(),activeParticipantId:Ge[0].id,layoutId:cs,themeId:"light",backgroundImageUrl:"",backgroundImageOpacity:.35,backgroundColor:"",exportSettings:{...ms},ui:{...hs},lastAutosaveAt:null,history:B(t)})),loadConversation:t=>{const r=t.title,i=Ve(t.participants),l=i.length>2?t.groupName??r??"Group Chat":void 0;s(m=>({conversation:{...t,participants:i,groupName:l},activeParticipantId:i[0]?.id??"",history:B(m)}))},undo:()=>s(t=>{if(t.history.past.length===0)return t;const r=t.history.past[t.history.past.length-1];return{conversation:r.conversation,layoutId:r.layoutId,themeId:r.themeId,activeParticipantId:r.activeParticipantId,backgroundImageUrl:r.backgroundImageUrl,backgroundImageOpacity:r.backgroundImageOpacity,backgroundColor:r.backgroundColor,exportSettings:r.exportSettings,history:{past:t.history.past.slice(0,-1),future:[We(t),...t.history.future].slice(0,$e)}}}),redo:()=>s(t=>{if(t.history.future.length===0)return t;const r=t.history.future[0];return{conversation:r.conversation,layoutId:r.layoutId,themeId:r.themeId,activeParticipantId:r.activeParticipantId,backgroundImageUrl:r.backgroundImageUrl,backgroundImageOpacity:r.backgroundImageOpacity,backgroundColor:r.backgroundColor,exportSettings:r.exportSettings,history:{past:[...t.history.past,We(t)].slice(-$e),future:t.history.future.slice(1)}}}),saveSnapshot:()=>{const t=a();try{localStorage.setItem(Oe,JSON.stringify({conversation:t.conversation,layoutId:t.layoutId,themeId:t.themeId,activeParticipantId:t.activeParticipantId,exportSettings:t.exportSettings}))}catch(r){console.error("Failed to save snapshot",r)}},clearSnapshot:()=>{try{localStorage.removeItem(Oe)}catch(t){console.error("Failed to clear snapshot",t)}}}),{name:Oe,storage:st(()=>localStorage),version:2,migrate:s=>{if(!s)return s;const a=s;return{...a,conversation:{...a.conversation,participants:Ve(a.conversation.participants)}}},partialize:s=>({conversation:s.conversation,layoutId:s.layoutId,themeId:s.themeId,activeParticipantId:s.activeParticipantId,backgroundImageUrl:s.backgroundImageUrl,backgroundImageOpacity:s.backgroundImageOpacity,backgroundColor:s.backgroundColor,exportSettings:s.exportSettings,lastAutosaveAt:s.lastAutosaveAt})}));function v(...s){return tt(qs(s))}const na=vs("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-white",{variants:{variant:{default:"bg-slate-900 text-white hover:bg-slate-800",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200",outline:"border border-slate-200 bg-white text-slate-900 hover:bg-slate-100",ghost:"text-slate-700 hover:bg-slate-100",destructive:"bg-red-500 text-white hover:bg-red-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=b.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...i},l)=>{const m=r?at:"button";return e.jsx(m,{className:v(na({variant:a,size:t,className:s})),ref:l,...i})});d.displayName="Button";const xs="M19.998 3.094 14.638 0l-2.972 5.15H5.432v6.354L0 14.64 3.094 20 0 25.359l5.432 3.137v5.905h5.975L14.638 40l5.36-3.094L25.358 40l3.232-5.6h6.162v-6.01L40 25.359 36.905 20 40 14.641l-5.248-3.03v-6.46h-6.419L25.358 0l-5.36 3.094Z",us="M27.413 14.319l2.254 2.287-11.43 11.5-6.835-6.93 2.244-2.258 4.587 4.581 9.18-9.18Z",ss=({className:s,title:a="Verified",variant:t="default"})=>e.jsxs("svg",{"aria-label":a,className:v("h-[18px] w-[18px]",s),height:"18",role:"img",viewBox:"0 0 40 40",width:"18",children:[e.jsx("title",{children:a}),t==="whatsapp"?e.jsxs(e.Fragment,{children:[e.jsx("path",{d:xs,fill:"#2cd268"}),e.jsx("path",{d:us,fill:"#ffffff"})]}):e.jsx("path",{d:`${xs}${us}`,fill:"rgb(0, 149, 246)",fillRule:"evenodd"})]}),Ye=({src:s,alt:a,className:t,borderClassName:r,imageClassName:i})=>e.jsx("span",{className:v("relative inline-flex shrink-0 overflow-hidden rounded-full bg-center bg-cover",t,r),style:{backgroundImage:`url("${s}")`},children:e.jsx("img",{src:s,alt:a,className:v("block h-full w-full object-cover",i),loading:"eager",decoding:"async"})}),la=({title:s,subtitle:a,avatarUrl:t,avatarFallback:r,isVerified:i,layout:l,theme:m})=>{const x=l.id==="whatsapp",c=l.id==="imessage",p=l.id==="snapchat",I=l.id==="messenger",y=l.id==="instagram",f=l.id==="tinder",n=y?yt:Nt,g=x?[be,ve,Se]:c?[Se]:p?[be,ve]:I?[ve,be,Se]:y?[ve,be]:f?[It,_e]:[ve,be,Se],k=x?"px-3 py-2":c?"px-4 py-2.5":p||I?"px-3 py-2":y?"px-3 py-2.5":"px-4 py-3",S=x?"h-5 w-5":c||p||I||y?"h-[18px] w-[18px]":f?"h-5 w-5":"h-4 w-4",R=v("text-inherit hover:bg-white/10",x&&"h-9 w-9 rounded-full",c&&"h-8 w-8 rounded-full text-[var(--chat-accent)] hover:bg-black/5",p&&"h-8 w-8 rounded-full text-[var(--chat-header-text)] hover:bg-black/5",I&&"h-8 w-8 rounded-full text-[var(--chat-accent)] hover:bg-[color:rgba(0,132,255,0.1)]",y&&"h-8 w-8 rounded-full text-[var(--chat-header-text)] hover:bg-white/10",f&&"h-9 w-9 rounded-full text-[var(--chat-accent)] hover:bg-[color:rgba(253,80,104,0.12)]"),D=x?"h-9 w-9":c?"h-10 w-10":p?"h-8 w-8":I||y?"h-9 w-9":"h-10 w-10",u=v((y||f)&&"border border-[var(--chat-border)]",!c&&!y&&!f&&"border border-white/20",p&&"border-black/5"),A=l.showAvatars||c||p||I||y||f,j=(r||s).slice(0,2).toUpperCase(),L=v("flex items-center justify-center rounded-full font-semibold",D,x?"bg-white/15 text-[0.75rem]":c||p?"bg-black/5 text-[0.7rem]":I||y?"bg-[var(--chat-border)] text-[0.7rem]":f?"bg-[var(--chat-border)] text-[0.7rem] text-[var(--chat-muted)]":"bg-white/15 text-sm"),z=i?e.jsx(ss,{className:"h-3.5 w-3.5",variant:x?"whatsapp":"default"}):null,w=A&&t?e.jsx(Ye,{src:t,alt:s,className:D,borderClassName:u}):e.jsx("div",{className:L,children:j});return e.jsx("div",{className:v("chat-header relative z-10 flex items-center justify-between gap-4",k,x?"min-h-[56px]":c?"min-h-[72px] border-b border-[var(--chat-border)]":p||I||y?"min-h-[56px] border-b border-[var(--chat-border)]":f?"min-h-[64px] border-b border-[var(--chat-border)]":l.headerStyle==="compact"?"min-h-[56px]":"min-h-[68px]"),style:{backgroundColor:m.colors.header,color:m.colors.headerText},children:c?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid w-full grid-cols-[auto_1fr_auto] items-center",children:[e.jsx(d,{size:"icon",variant:"ghost",className:R,children:e.jsx(n,{className:S})}),e.jsxs("div",{className:"flex flex-col items-center gap-1 justify-self-center",children:[w,e.jsxs("div",{className:"flex items-center gap-1 text-[0.85rem] font-semibold",children:[e.jsx("span",{children:s}),z]})]}),e.jsx("div",{className:"flex items-center justify-self-end",children:g.map((M,E)=>e.jsx(d,{size:"icon",variant:"ghost",className:R,children:e.jsx(M,{className:S})},`${l.id}-action-${E}`))})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:v("flex items-center",x?"gap-2.5":p||I||y?"gap-2":"gap-3"),children:[e.jsx(d,{size:"icon",variant:"ghost",className:R,children:e.jsx(n,{className:S})}),w,e.jsxs("div",{children:[e.jsxs("div",{className:v("flex items-center gap-1 font-semibold",x?"text-[0.95rem] leading-tight":p?"text-[0.9rem]":I||y?"text-[0.95rem]":f?"text-[1rem] leading-tight":"text-sm"),children:[e.jsx("span",{children:s}),z,y?e.jsx(Ct,{className:"h-3.5 w-3.5 opacity-70"}):null]}),l.showStatus&&a?e.jsx("div",{className:v("opacity-80",x?"text-[0.7rem] leading-tight":p?"text-[0.65rem]":"text-xs"),children:a}):null]})]}),e.jsx("div",{className:v("flex items-center",x?"gap-1":"gap-2"),children:g.map((M,E)=>e.jsx(d,{size:"icon",variant:"ghost",className:R,children:e.jsx(M,{className:S})},`${l.id}-action-${E}`))})]})})},ps=(s,a)=>{const t=v("h-3.5 w-3.5",a);return s==="read"?e.jsx(rs,{className:t}):s==="delivered"?e.jsx(rs,{className:v(t,"opacity-70")}):e.jsx(zs,{className:v(t,"opacity-70")})},oa=({message:s,sender:a,isOwn:t,layout:r,isGroup:i,showAvatar:l})=>{const m=r.id==="whatsapp",x=r.id==="imessage",c=r.id==="snapchat",p=r.id==="messenger",I=r.id==="instagram",y=r.id==="tinder",f=p&&!t&&!!l,n=I&&!t&&!!l,g=(a?.name||"??").slice(0,2).toUpperCase(),k=m?i:c?!0:p||I?i:r.showAvatars,S=a?.isVerified?e.jsx(ss,{className:"h-3.5 w-3.5",variant:m?"whatsapp":"default"}):null,R=m?"rounded-[16px]":x?"rounded-[18px]":c?"rounded-none":p||I?"rounded-[20px]":y?"rounded-[22px]":r.bubbleStyle==="sharp"?"rounded-md":r.bubbleStyle==="minimal"?"rounded-lg":"rounded-2xl",D=t?"var(--bubble-sent)":"var(--bubble-received)",u=t?"var(--bubble-sent-text)":"var(--bubble-received-text)",A=t?"var(--bubble-sent)":"var(--bubble-received)",j={backgroundColor:D,color:u};m&&(j["--bubble-color"]=D),I&&t&&(j.backgroundImage="linear-gradient(135deg, #7c3aed 0%, #6366f1 55%, #3b82f6 100%)"),c&&(j.backgroundColor="transparent",j.color=A,j.borderLeftColor=A,j.borderLeftStyle="solid",j.borderLeftWidth="3px"),y&&(t?j.backgroundImage="linear-gradient(135deg, #fd5068 0%, #ff7a59 100%)":j.border="1px solid var(--chat-border)");const L=m?"rounded-[12px]":x?"rounded-[16px]":c?"rounded-none":p||I?"rounded-[16px]":y?"rounded-[18px]":"rounded-lg",w=n?"":p?"":c?"mr-auto":t?"ml-auto":"mr-auto",M=I&&!t&&!n?"ml-8":"",E=p&&!t&&!f?"ml-8":"",Q=f?a?.avatarUrl?e.jsx(Ye,{src:a.avatarUrl,alt:a?.name||"Avatar",className:"h-7 w-7"}):e.jsx("div",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-[var(--chat-border)] text-[0.6rem] font-semibold text-[var(--chat-muted)]",children:g}):null,H=n?a?.avatarUrl?e.jsx(Ye,{src:a.avatarUrl,alt:a?.name||"Avatar",className:"h-6 w-6",borderClassName:"border border-[var(--chat-border)]"}):e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full border border-[var(--chat-border)] bg-[var(--chat-border)] text-[0.55rem] font-semibold text-[var(--chat-muted)]",children:g}):null,G=e.jsxs("div",{className:v("text-sm shadow-sm",s.type==="image"?"p-1":"px-3 py-2",R,w,M,E,m?"whatsapp-bubble relative max-w-[80%] px-3 py-1.5 text-[0.94rem] leading-[1.3] shadow-[0_1px_1px_rgba(0,0,0,0.08)]":x?"max-w-[76%] px-3 py-2 text-[0.95rem] leading-[1.35]":c?"max-w-[82%] px-3 py-1 text-[0.95rem] leading-[1.35] shadow-none":p||I?"max-w-[78%] px-3 py-2 text-[0.95rem] leading-[1.35] shadow-none":y?"max-w-[72%] px-4 py-2 text-[0.95rem] leading-[1.35] shadow-none":"max-w-[78%]",s.type==="image"&&"p-1",m&&(t?"whatsapp-bubble--own":"whatsapp-bubble--other")),style:j,children:[s.type==="image"?e.jsxs("div",{className:"space-y-2",children:[s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.content||"Uploaded message",className:v("max-h-64 w-full max-w-[240px] border border-white/20 object-cover",L)}):e.jsx("div",{className:"h-24 w-40 rounded-lg border border-white/20 bg-white/10"}),s.content?e.jsx("p",{className:v("mt-1 max-w-[240px] whitespace-pre-wrap break-words px-2 pb-1 text-[0.8rem] leading-snug",m&&"text-[0.75rem]",x&&"text-[0.82rem]",c&&"text-[0.75rem] uppercase tracking-wide",p&&"text-[0.8rem]",I&&"text-[0.8rem]",y&&"text-[0.8rem]"),children:s.content}):null]}):e.jsx("p",{className:"whitespace-pre-wrap break-words leading-relaxed",children:s.content}),m?e.jsxs("div",{className:"mt-0.5 flex items-center justify-end gap-1 text-[0.6rem] leading-none",style:{color:"var(--chat-muted)"},children:[e.jsx("span",{children:He(s.timestamp)}),t?e.jsx("span",{className:v("flex items-center gap-1",s.status==="read"&&"text-[#53bdeb]"),children:ps(s.status,"h-3 w-3")}):null]}):null]});return e.jsxs("div",{className:v("flex w-full flex-col gap-1",c?"items-start":t?"items-end":"items-start"),children:[k&&(c||!t&&a)?e.jsxs("div",{className:v("flex items-center gap-2 text-xs",m?"font-medium text-[0.7rem]":c?"font-semibold text-[0.7rem] uppercase tracking-wide":p||I?"font-semibold text-[0.7rem]":"text-slate-200"),style:m?{color:a?.color}:c?{color:A}:p?{color:"var(--chat-muted)"}:I?{color:"var(--chat-muted)"}:void 0,children:[!m&&!c?e.jsx("span",{className:"h-2 w-2 rounded-full",style:{backgroundColor:a?.color??"transparent"}}):null,e.jsx("span",{children:c?t?"You":a?.name??"Unknown":a?.name}),S]}):null,p?e.jsx("div",{className:v("flex w-full items-end gap-2",t?"justify-end":"justify-start"),children:t?e.jsxs(e.Fragment,{children:[G,Q]}):e.jsxs(e.Fragment,{children:[Q,G]})}):n?e.jsxs("div",{className:"flex w-full items-end gap-2",children:[H,G]}):G,!m&&!x&&!c&&!p&&!I&&!y?e.jsxs("div",{className:v("flex items-center gap-2 text-[0.7rem]",t?"text-right":"text-left",x&&"text-[0.6rem]"),style:{color:"var(--chat-muted)"},children:[e.jsx("span",{children:He(s.timestamp)}),t?e.jsx("span",{className:"flex items-center gap-1",children:ps(s.status)}):null]}):null]})},ca=({messages:s,participants:a,layout:t,selfId:r})=>{const i=s.filter(n=>!n.isHidden),l=t.id==="whatsapp",m=t.id==="snapchat",x=t.id==="messenger",c=t.id==="instagram",p=t.id==="tinder",I=a.length>2,y=v("mx-auto w-fit rounded-full px-2.5 py-0.5 text-[0.7rem]",l?"bg-white/70 text-[0.65rem] font-medium text-[#54656f] shadow-[0_1px_0_rgba(0,0,0,0.08)]":m?"bg-black/5 text-[0.6rem] font-medium text-[var(--chat-muted)]":x?"bg-transparent text-[0.6rem] font-medium text-[var(--chat-muted)]":c?"bg-transparent text-[0.6rem] font-semibold uppercase tracking-[0.2em] text-[var(--chat-muted)]":p?"bg-transparent text-[0.55rem] font-semibold uppercase tracking-wide text-[var(--chat-muted)]":"bg-white/20 text-[var(--chat-muted)]"),f=v("mx-auto max-w-[70%] rounded-full px-4 py-2 text-center text-xs",l?"bg-white/70 text-[#54656f] shadow-[0_1px_0_rgba(0,0,0,0.08)]":m?"bg-black/5 text-[var(--chat-muted)]":x||c||p?"bg-transparent text-[var(--chat-muted)]":"bg-white/15 text-[var(--chat-muted)]");return e.jsxs("div",{className:v("relative z-10 flex h-full min-h-0 flex-col overflow-y-auto overscroll-contain hide-scrollbar",l?"gap-1 px-3 py-4":m?"gap-2 px-2.5 py-4":x||c?"gap-3 px-3 py-4":p?"gap-2.5 px-4 py-4":"gap-4 px-4 py-6"),children:[i.length===0?e.jsx("div",{className:"mx-auto max-w-sm rounded-2xl border border-dashed border-white/40 bg-white/10 px-6 py-8 text-center text-sm text-[var(--chat-muted)]",children:s.length===0?"Start your story by adding messages in the builder.":"No visible messages. Unhide messages in the builder."}):null,i.map((n,g)=>{const k=a.find(w=>w.id===n.senderId),S=c?ra(n.timestamp):Ee(n.timestamp),R=Ee(n.timestamp),D=g>0?Ee(i[g-1].timestamp):"",u=R!==D,A=n.senderId===r,j=i[g+1],L=!j||j.senderId!==n.senderId||j.type==="system",z=(c||x)&&!A&&L;return n.type==="system"?e.jsxs("div",{className:"space-y-3",children:[u?e.jsx("div",{className:y,children:S}):null,e.jsx("div",{className:f,children:n.content})]},n.id):e.jsxs("div",{className:l?"space-y-2":"space-y-3",children:[u?e.jsx("div",{className:y,children:S}):null,e.jsx(oa,{message:n,sender:k,isOwn:A,layout:t,isGroup:I,showAvatar:z})]},n.id)})]})},da=({placeholder:s="Message",layout:a})=>{const t=a?.id==="whatsapp",r=a?.id==="imessage",i=a?.id==="snapchat",l=a?.id==="messenger",m=a?.id==="instagram",x=a?.id==="tinder",c=t||r||i||l||m||x?"h-[18px] w-[18px]":"h-4 w-4",p=v("text-[var(--chat-muted)] hover:bg-white/10",t&&"h-8 w-8 rounded-full",r&&"h-8 w-8 rounded-full",i&&"h-8 w-8 rounded-full text-[var(--chat-header-text)] hover:bg-black/5",l&&"h-8 w-8 rounded-full text-[var(--chat-accent)] hover:bg-[color:rgba(0,132,255,0.1)]",m&&"h-8 w-8 rounded-full text-[var(--chat-header-text)] hover:bg-black/5",x&&"h-9 w-9 rounded-full text-[var(--chat-accent)] hover:bg-[color:rgba(253,80,104,0.12)]"),I=r?"iMessage":i?"Chat":l?"Aa":m?"Message...":x?"Say something nice":s;return e.jsxs("div",{className:v("relative z-10 flex items-center gap-2 border-t border-white/10 px-3 py-2",t&&"gap-1.5 border-black/5 px-2.5 py-2",r&&"border-black/5 px-3 py-2",i&&"gap-2 border-black/5 px-3 py-2",l&&"gap-2 border-black/5 px-3 py-2",m&&"gap-2 border-[var(--chat-border)] px-3 py-2",x&&"gap-2.5 border-black/5 px-4 py-3"),style:{backgroundColor:"var(--chat-input)"},children:[x?e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"outline",size:"sm",className:"h-8 rounded-full border-[var(--chat-border)] px-3 text-[0.65rem] font-semibold uppercase tracking-wide text-[var(--chat-accent)] hover:bg-[color:rgba(253,80,104,0.08)]",children:"GIF"}),e.jsx(d,{variant:"outline",size:"sm",className:"h-8 rounded-full border-[var(--chat-border)] px-3 text-[0.65rem] font-semibold uppercase tracking-wide text-[var(--chat-accent)] hover:bg-[color:rgba(253,80,104,0.08)]",children:"Sticker"})]}):null,l?e.jsx(d,{variant:"ghost",size:"icon",className:v(p,"text-[var(--chat-accent)]"),children:e.jsx(re,{className:c})}):null,m?e.jsx(d,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-white shadow-sm hover:bg-transparent",style:{backgroundImage:"linear-gradient(135deg, #7c3aed 0%, #6366f1 55%, #3b82f6 100%)"},children:e.jsx(je,{className:c})}):null,i?e.jsx(d,{variant:"ghost",size:"icon",className:v(p,"text-[var(--chat-header-text)]"),children:e.jsx(re,{className:c})}):null,r?e.jsx(d,{variant:"ghost",size:"icon",className:v(p,"text-[var(--chat-accent)]"),children:e.jsx(re,{className:c})}):null,t?e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(re,{className:c})}):!r&&!i&&!l&&!m&&!x?e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(Ue,{className:c})}):null,!t&&!r&&!i&&!l&&!m&&!x?e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(se,{className:c})}):null,e.jsxs("div",{className:v("flex-1 rounded-full px-4 py-2 text-sm",t&&"min-h-[36px] py-2 text-[0.95rem] shadow-sm",r&&"flex items-center gap-2 border py-2 text-[0.95rem]",i&&"flex items-center gap-2 border bg-[var(--chat-input-inner)] py-2 text-[0.95rem]",l&&"flex items-center gap-2 border bg-[var(--chat-input-inner)] py-2 text-[0.95rem]",m&&"flex items-center gap-2 border bg-[var(--chat-input-inner)] py-2 text-[0.95rem]",x&&"flex items-center gap-2 border bg-[var(--chat-input-inner)] py-2 text-[0.95rem]"),style:{backgroundColor:"var(--chat-input-inner)",color:"var(--chat-text)",borderColor:r||i||l||m||x?"var(--chat-border)":void 0},children:[r?e.jsx(je,{className:v(c,"text-[var(--chat-muted)]")}):null,i?e.jsx(Ue,{className:v(c,"text-[var(--chat-muted)]")}):null,l?e.jsx(Ue,{className:v(c,"text-[var(--chat-muted)]")}):null,e.jsx("span",{className:"text-[var(--chat-muted)]",children:I})]}),t?e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(je,{className:c})}):null,i?e.jsx(d,{size:"icon",className:"h-10 w-10 rounded-full bg-[var(--chat-accent)] text-black shadow-sm hover:opacity-90",children:e.jsx(je,{className:c})}):null,l?e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(je,{className:c})}),e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(se,{className:c})}),e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(we,{className:c})})]}):null,m?e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(we,{className:c})}),e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(se,{className:c})}),e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(St,{className:c})}),e.jsx(d,{variant:"ghost",size:"icon",className:v(p,"border border-[var(--chat-border)]"),children:e.jsx(re,{className:c})})]}):null,t?e.jsx(d,{size:"icon",className:v("bg-[var(--chat-accent)] text-white hover:opacity-90","h-10 w-10 rounded-full"),children:e.jsx(we,{className:c})}):r?e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(we,{className:c})}):x?e.jsx(d,{size:"icon",className:"h-10 w-10 rounded-full bg-[var(--chat-accent)] text-white shadow-sm hover:opacity-90",children:e.jsx(is,{className:c})}):!i&&!l&&!m&&!x?e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"ghost",size:"icon",className:p,children:e.jsx(we,{className:c})}),e.jsx(d,{size:"icon",className:"bg-[var(--chat-accent)] text-white hover:opacity-90",children:e.jsx(is,{className:c})})]}):null]})},ma=s=>{const a=s.find(i=>i.status==="typing");if(a)return`${a.name} is typing...`;const t=s.filter(i=>i.status==="online");return t.length?`${t.length} online`:s.some(i=>i.status!=="empty")?"Offline":""},ha=(s,a)=>a==="instagram"?s==="typing"?"Typing...":s==="online"?"Active now":s==="empty"?"":"Active yesterday":s==="typing"?"typing...":s==="online"?"online":s==="empty"?"":"offline",xa=(s,a)=>s.length===2?s.find(r=>r.id===a)?.id??s[0]?.id??"":s[0]?.id??"",ua=({conversation:s,layout:a,theme:t,showChrome:r,activeParticipantId:i,backgroundImageUrl:l,backgroundImageOpacity:m,backgroundColor:x})=>{const c=`Roboto, ${a.fonts.body}`,p=`Roboto, ${a.fonts.header}`,I=xa(s.participants,i),y=s.participants.length>2,f=y?void 0:s.participants.find(k=>k.id!==I)??s.participants[0],n=y?Bs(s):f?.name??"New Chat",g=y?ma(s.participants):ha(f?.status,a.id);return e.jsxs("div",{className:`chat-surface relative flex h-full w-full flex-col overflow-hidden layout-${a.id}`,"data-layout":a.id,style:{"--chat-bg":x||t.colors.background,"--chat-surface":t.colors.surface,"--chat-header":t.colors.header,"--chat-header-text":t.colors.headerText,"--bubble-sent":t.colors.bubbleSent,"--bubble-sent-text":t.colors.bubbleSentText,"--bubble-received":t.colors.bubbleReceived,"--bubble-received-text":t.colors.bubbleReceivedText,"--chat-input":t.colors.surface,"--chat-input-inner":t.colors.input,"--chat-text":t.colors.inputText,"--chat-accent":t.colors.accent,"--chat-muted":t.colors.muted,"--chat-border":t.colors.border,"--chat-pattern":t.pattern??"none","--chat-radius":a.radius,"--layout-font-header":p,"--layout-font-body":c,fontFamily:c},children:[l?e.jsx("img",{src:l,alt:"",className:"chat-layer h-full w-full object-cover",style:{opacity:m},"aria-hidden":"true"}):null,t.pattern?e.jsx("div",{className:"chat-layer chat-bg-pattern","aria-hidden":"true"}):null,r?e.jsx(la,{title:n,subtitle:g,avatarUrl:y?void 0:f?.avatarUrl,avatarFallback:y?n:f?.name,isVerified:y?void 0:f?.isVerified,layout:a,theme:t}):null,e.jsx("div",{className:"relative flex-1 min-h-0",children:e.jsx(ca,{messages:s.messages,participants:s.participants,layout:a,selfId:I})}),r?e.jsx(da,{layout:a}):null]})},pa=(s,a)=>{const t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=a,i.click(),URL.revokeObjectURL(r)},fa=s=>new Promise((a,t)=>{const r=new FileReader;r.onload=()=>{try{const i=JSON.parse(r.result);a(i)}catch(i){t(i)}},r.onerror=()=>t(r.error),r.readAsText(s)}),ga=vs("inline-flex items-center rounded-full border border-transparent px-2.5 py-0.5 text-xs font-semibold transition",{variants:{variant:{default:"bg-slate-900 text-white",secondary:"bg-slate-100 text-slate-700",outline:"border-slate-200 text-slate-700"}},defaultVariants:{variant:"default"}}),fs=({className:s,variant:a,...t})=>e.jsx("div",{className:v(ga({variant:a,className:s})),...t}),Gs=it,Je=nt,Qe=lt,Me=b.forwardRef(({className:s,sideOffset:a=6,...t},r)=>e.jsx(rt,{children:e.jsx(js,{ref:r,sideOffset:a,className:v("z-50 rounded-md bg-slate-900 px-3 py-1.5 text-xs text-white shadow-md animate-in fade-in-0 zoom-in-95",s),...t})}));Me.displayName=js.displayName;const he=ct,Ke=dt,Vs=s=>e.jsx(Cs,{...s});Vs.displayName=Cs.displayName;const $s=b.forwardRef(({className:s,...a},t)=>e.jsx(ws,{ref:t,className:v("fixed inset-0 z-50 bg-black/40 backdrop-blur-sm",s),...a}));$s.displayName=ws.displayName;const ie=b.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Vs,{children:[e.jsx($s,{}),e.jsxs(ys,{ref:r,className:v("fixed left-1/2 top-1/2 z-50 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 rounded-2xl border border-slate-200 bg-white p-6 shadow-xl",s),...t,children:[a,e.jsxs(ot,{className:"absolute right-4 top-4 rounded-full p-1 text-slate-500 transition hover:bg-slate-100",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ie.displayName=ys.displayName;const ne=({className:s,...a})=>e.jsx("div",{className:v("space-y-2",s),...a});ne.displayName="DialogHeader";const le=b.forwardRef(({className:s,...a},t)=>e.jsx(Ns,{ref:t,className:v("text-lg font-semibold",s),...a}));le.displayName=Ns.displayName;const oe=b.forwardRef(({className:s,...a},t)=>e.jsx(Is,{ref:t,className:v("text-sm text-slate-500",s),...a}));oe.displayName=Is.displayName;const ba=(s,a)=>s.conversation!==a.conversation||s.layoutId!==a.layoutId||s.themeId!==a.themeId||s.activeParticipantId!==a.activeParticipantId||s.backgroundImageUrl!==a.backgroundImageUrl||s.backgroundImageOpacity!==a.backgroundImageOpacity||s.backgroundColor!==a.backgroundColor||s.exportSettings!==a.exportSettings,va=(s,a)=>{const t=Math.max(0,Math.floor((a-s)/1e3));if(t<5)return"just now";if(t<60)return`${t}s ago`;const r=Math.floor(t/60);if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`},ja=()=>{const s=b.useRef(null),[a,t]=b.useState(!1),[r,i]=b.useState(()=>Date.now()),[l,m]=b.useState(!1),x=N(w=>w.conversation),c=N(w=>w.layoutId),p=N(w=>w.themeId),I=N(w=>w.loadConversation),y=N(w=>w.resetConversation),f=N(w=>w.saveSnapshot),n=N(w=>w.clearSnapshot),g=N(w=>w.lastAutosaveAt),k=N(w=>w.setLastAutosaveAt),S=N(w=>w.undo),R=N(w=>w.redo),D=N(w=>w.history.past.length>0),u=N(w=>w.history.future.length>0);b.useEffect(()=>{const w=window.setInterval(()=>i(Date.now()),3e4);return()=>window.clearInterval(w)},[]),b.useEffect(()=>{const w=N.subscribe((M,E)=>{E&&ba(M,E)&&k(Date.now())});return()=>w()},[]),b.useEffect(()=>{const w=M=>{const E=M.target;if(E){const G=E.tagName;if(G==="INPUT"||G==="TEXTAREA"||E.isContentEditable)return}if(!(M.ctrlKey||M.metaKey))return;const H=M.key.toLowerCase();H==="z"?(M.shiftKey?u&&R():D&&S(),M.preventDefault()):H==="y"&&(u&&R(),M.preventDefault())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[u,D,R,S]);const A=g?`Autosaved ${va(g,r)}`:"Autosave idle",j=aa(c),L=j.themes.find(w=>w.id===p)??j.themes[0],z=[`${x.participants.length} participants`,`${x.messages.length} messages`,`${j.name} ${L.name}`];return e.jsx(Gs,{children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-2xl border border-white/10 bg-white/70 px-4 py-3 shadow-lg backdrop-blur",children:[e.jsxs("div",{className:"flex w-full items-center gap-3 sm:w-auto",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-xs font-semibold uppercase tracking-widest text-white",children:"CS"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Chat Message Simulator"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Craft and export chat mockups"}),e.jsx("div",{className:"hidden flex-wrap items-center gap-2 pt-1 sm:flex",children:z.map(w=>e.jsx(fs,{variant:"secondary",children:w},w))})]})]}),e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-2 sm:w-auto sm:justify-end",children:[e.jsx(fs,{variant:"secondary",children:A}),e.jsxs("div",{className:"flex items-center gap-1 rounded-full border border-slate-200 bg-white/80 p-1 shadow-sm",children:[e.jsxs(Je,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"sm",className:"rounded-full",onClick:S,disabled:!D,"aria-label":"Undo",children:[e.jsx(kt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Undo"})]})}),e.jsx(Me,{children:"Undo (Ctrl/Cmd+Z)"})]}),e.jsxs(Je,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"sm",className:"rounded-full",onClick:R,disabled:!u,"aria-label":"Redo",children:[e.jsx(At,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Redo"})]})}),e.jsx(Me,{children:"Redo (Ctrl/Cmd+Shift+Z or Ctrl/Cmd+Y)"})]})]}),e.jsxs(he,{open:a,onOpenChange:t,children:[e.jsx(Ke,{asChild:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"Actions"]})}),e.jsxs(ie,{children:[e.jsxs(ne,{children:[e.jsx(le,{children:"Project actions"}),e.jsx(oe,{children:"Manage files, local storage, and project utilities."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"File"}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsxs(d,{variant:"secondary",onClick:()=>{pa(x,"conversation.json"),t(!1)},children:[e.jsx(Pt,{className:"h-4 w-4"}),"Export JSON"]}),e.jsxs(d,{variant:"secondary",onClick:()=>{t(!1),s.current?.click()},children:[e.jsx(Tt,{className:"h-4 w-4"}),"Load JSON"]}),e.jsxs(d,{variant:"secondary",onClick:()=>{f(),k(Date.now()),t(!1)},children:[e.jsx(Mt,{className:"h-4 w-4"}),"Save Local"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Utilities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(d,{variant:"destructive",onClick:()=>{t(!1),m(!0)},children:[e.jsx(Re,{className:"h-4 w-4"}),"Reset project"]})})]})]})]})]}),e.jsx(he,{open:l,onOpenChange:m,children:e.jsxs(ie,{children:[e.jsxs(ne,{children:[e.jsx(le,{children:"Reset this project?"}),e.jsx(oe,{children:"This clears the current conversation, layout, and stored snapshot. You can't undo this action."})]}),e.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[e.jsx(d,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:()=>{y(),n(),m(!1)},children:"Reset project"})]})]})})]}),e.jsx("input",{ref:s,type:"file",accept:"application/json",className:"hidden",onChange:async w=>{const M=w.target.files?.[0];if(M)try{const E=await fa(M);I(E)}catch(E){console.error("Failed to import JSON",E)}finally{w.target.value=""}}})]})})},Y=b.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{ref:r,type:a,className:v("flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t}));Y.displayName="Input";const F=b.forwardRef(({className:s,...a},t)=>e.jsx(Ss,{ref:t,className:v("text-sm font-medium text-slate-700",s),...a}));F.displayName=Ss.displayName;const ye=ft,Ne=gt,xe=b.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(ks,{ref:r,className:v("flex h-10 w-full items-center justify-between rounded-md border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm transition focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:[a,e.jsx(mt,{asChild:!0,children:e.jsx(Rt,{className:"h-4 w-4 opacity-60"})})]}));xe.displayName=ks.displayName;const ue=b.forwardRef(({className:s,children:a,position:t="popper",...r},i)=>e.jsx(ht,{children:e.jsx(As,{ref:i,className:v("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white text-slate-900 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),position:t,...r,children:e.jsx(xt,{className:"p-1",children:a})})}));ue.displayName=As.displayName;const W=b.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(Ps,{ref:r,className:v("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ut,{children:e.jsx(zs,{className:"h-4 w-4"})})}),e.jsx(pt,{children:a})]}));W.displayName=Ps.displayName;const wa=b.forwardRef(({className:s,...a},t)=>e.jsx(Ts,{ref:t,className:v("px-2 py-1.5 text-xs font-semibold text-slate-500",s),...a}));wa.displayName=Ts.displayName;const ya=b.forwardRef(({className:s,...a},t)=>e.jsx(Ms,{ref:t,className:v("-mx-1 my-1 h-px bg-slate-100",s),...a}));ya.displayName=Ms.displayName;const te=b.forwardRef(({className:s,thumbClassName:a,...t},r)=>e.jsx(Rs,{ref:r,className:v("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent bg-slate-200 transition data-[state=checked]:bg-slate-900",s),...t,children:e.jsx(bt,{className:v("pointer-events-none block h-5 w-5 translate-x-0 rounded-full bg-white shadow transition data-[state=checked]:translate-x-5",a)})}));te.displayName=Rs.displayName;const gs={name:"",avatarUrl:"",isVerified:!1,status:"online",color:"#22c55e"},Na=()=>{const s=N(n=>n.conversation.participants),a=N(n=>n.activeParticipantId),t=N(n=>n.addParticipant),r=N(n=>n.updateParticipant),i=N(n=>n.removeParticipant),l=N(n=>n.setActiveParticipant),[m,x]=b.useState(gs),[c,p]=b.useState(null),I=n=>n.type.startsWith("image/")?n.size>2*1024*1024?"Image must be smaller than 2MB.":null:"Only image files are allowed.",y=async(n,g)=>{const k=I(g);if(k){p(k);return}p(null);try{const S=await Te(g);r(n,{avatarUrl:S})}catch(S){console.error("Failed to read avatar file",S),p("Could not read the selected image.")}},f=async n=>{const g=I(n);if(g){p(g);return}p(null);try{const k=await Te(n);x(S=>({...S,avatarUrl:k}))}catch(k){console.error("Failed to read avatar file",k),p("Could not read the selected image.")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Participants"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Manage contacts, avatars, and choose who is sending the next message."})]}),c?e.jsx("div",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs text-red-600",children:c}):null,e.jsx("div",{className:"space-y-3",children:s.map(n=>e.jsx("div",{className:v("rounded-xl border border-slate-200 bg-white p-3 shadow-sm",a===n.id&&"ring-2 ring-slate-900/15"),children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[n.avatarUrl?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n.avatarUrl,alt:n.name,className:"h-12 w-12 rounded-full object-cover"}),e.jsxs(d,{variant:"ghost",size:"icon",className:"absolute -top-1 -left-1 h-6 w-6 rounded-full bg-white shadow",onClick:()=>r(n.id,{avatarUrl:void 0}),children:[e.jsx(Xe,{className:"h-3 w-3"}),e.jsx("span",{className:"sr-only",children:"Remove avatar"})]})]}):e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 text-sm font-semibold text-slate-500",children:n.name.slice(0,2).toUpperCase()||"??"}),n.isVerified?e.jsx("span",{className:"absolute -top-1 -right-1 rounded-full bg-white p-0.5 shadow",children:e.jsx(ss,{className:"h-3.5 w-3.5"})}):null,e.jsx(d,{asChild:!0,variant:"ghost",size:"icon",className:"absolute -bottom-2 -right-2 h-7 w-7 rounded-full bg-white shadow",children:e.jsx("label",{htmlFor:`avatar-${n.id}`,children:e.jsx(se,{className:"h-3.5 w-3.5"})})}),e.jsx("input",{id:`avatar-${n.id}`,type:"file",accept:"image/*",className:"hidden",onChange:async g=>{const k=g.target.files?.[0];k&&(await y(n.id,k),g.target.value="")}})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Y,{value:n.name,onChange:g=>r(n.id,{name:g.target.value}),placeholder:"Name"}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsxs(ye,{value:n.status,onValueChange:g=>r(n.id,{status:g}),children:[e.jsx(xe,{children:e.jsx(Ne,{placeholder:"Status"})}),e.jsxs(ue,{children:[e.jsx(W,{value:"online",children:"Online"}),e.jsx(W,{value:"offline",children:"Offline"}),e.jsx(W,{value:"typing",children:"Typing"}),e.jsx(W,{value:"empty",children:"Empty"})]})]}),e.jsx(Y,{type:"color",value:n.color,onChange:g=>r(n.id,{color:g.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 bg-slate-50 px-3 py-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Verified badge"}),e.jsx(te,{checked:!!n.isVerified,onCheckedChange:g=>r(n.id,{isVerified:g})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{variant:a===n.id?"default":"outline",size:"sm",onClick:()=>l(n.id),children:[e.jsx(Dt,{className:"h-4 w-4"}),"Active"]}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>i(n.id),children:e.jsx(Re,{className:"h-4 w-4"})})]})]})},n.id))}),e.jsxs("div",{className:"rounded-xl border border-dashed border-slate-200 bg-white/70 p-3",children:[e.jsx(F,{className:"text-xs uppercase text-slate-400",children:"Add new participant"}),e.jsxs("div",{className:"mt-2 grid gap-2 sm:grid-cols-[1fr_auto]",children:[e.jsx(Y,{value:m.name,onChange:n=>x(g=>({...g,name:n.target.value})),placeholder:"Participant name"}),e.jsx(d,{onClick:()=>{if(!m.name.trim()){p("Name is required.");return}t({name:m.name.trim(),avatarUrl:m.avatarUrl||void 0,isVerified:m.isVerified,status:m.status,color:m.color}),x(gs),p(null)},children:"Add"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(d,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs("label",{htmlFor:"avatar-draft",className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Upload avatar"]})}),e.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white px-2 py-1",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Verified"}),e.jsx(te,{checked:!!m.isVerified,onCheckedChange:n=>x(g=>({...g,isVerified:n}))})]}),m.avatarUrl?e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>x(n=>({...n,avatarUrl:""})),children:"Remove avatar"}):null,e.jsx(Y,{type:"color",value:m.color,onChange:n=>x(g=>({...g,color:n.target.value}))}),e.jsx("span",{className:"text-xs text-slate-500",children:"Uploads only (best for exports)"}),e.jsx("input",{id:"avatar-draft",type:"file",accept:"image/*",className:"hidden",onChange:async n=>{const g=n.target.files?.[0];g&&(await f(g),n.target.value="")}})]})]})]})},ts=b.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{ref:t,className:v("flex min-h-[90px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a}));ts.displayName="Textarea";const Le=(s,a)=>s&&a.some(t=>t.id===s)?s:a[0]?.id??"",Fe=s=>{const a=new Date(s),t=a.getTimezoneOffset()*6e4;return new Date(a.getTime()-t).toISOString().slice(0,16)},Ia=s=>new Date(s).toISOString(),bs=({participants:s,initial:a,defaultSenderId:t,compact:r,resetOnSubmit:i,submitLabel:l,advancedOpen:m,onToggleAdvanced:x,onSubmit:c,onCancel:p})=>{const[I,y]=b.useState(a?.content??""),[f,n]=b.useState(a?.senderId??Le(t,s)),[g,k]=b.useState(a?.timestamp?Fe(a.timestamp):Fe(new Date().toISOString())),[S,R]=b.useState(a?.type??"text"),[D,u]=b.useState(a?.status??"sent"),[A,j]=b.useState(a?.imageUrl??""),[L,z]=b.useState(null),w=m??!0,M=typeof m=="boolean"&&typeof x=="function",E=b.useRef(t),Q=b.useRef(null),H=b.useRef(null);b.useEffect(()=>{if(a)return;const C=E.current;E.current=t;const T=Le(t,s);n(J=>{const ee=s.some(Z=>Z.id===J);return!J||!ee||J===C?T:J})},[t,a,s]);const G=C=>{const T=Q.current;if(!T){y(Z=>Z?`${Z}
${C}`:C);return}const J=T.selectionStart??T.value.length,ee=T.selectionEnd??T.value.length;y(Z=>Z.slice(0,J)+C+Z.slice(ee)),requestAnimationFrame(()=>{T.focus();const Z=J+C.length;T.setSelectionRange(Z,Z)})},ce=async()=>{try{if(navigator.clipboard?.readText){const T=await navigator.clipboard.readText();if(T){G(T);return}}}catch(T){console.error("Paste failed",T)}const C=window.prompt("Paste message");C&&G(C)},ae=async C=>{if(!C.type.startsWith("image/")){z("Only image files are allowed.");return}if(C.size>5*1024*1024){z("Image must be smaller than 5MB.");return}try{const T=await Te(C);j(T),z(null)}catch(T){console.error("Failed to read image file",T),z("Could not read the selected image.")}};return e.jsxs("form",{className:"space-y-3",onSubmit:C=>{if(C.preventDefault(),S==="image"&&!A){z("Please upload an image for this message.");return}c({senderId:f,content:I,imageUrl:S==="image"?A:void 0,timestamp:Ia(g),type:S,status:D}),i&&!a&&(y(""),k(Fe(new Date().toISOString())),R("text"),u("sent"),n(Le(t,s)),j(""),z(null))},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx(F,{children:S==="image"?"Caption":"Message"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{type:"button",size:"sm",variant:"ghost",onClick:ce,children:[e.jsx(zt,{className:"h-3.5 w-3.5"}),"Paste"]}),I?e.jsxs(d,{type:"button",size:"sm",variant:"ghost",onClick:()=>y(""),children:[e.jsx(Xe,{className:"h-3.5 w-3.5"}),"Clear"]}):null]})]}),e.jsx(ts,{ref:Q,value:I,onChange:C=>y(C.target.value),placeholder:S==="image"?"Add a caption (optional)...":"Write the message...",className:v(r&&"min-h-[72px]")})]}),S==="image"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Image upload"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"h-20 w-28 overflow-hidden rounded-lg border border-slate-200 bg-slate-50",children:A?e.jsx("img",{src:A,alt:"Uploaded preview",className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full items-center justify-center text-xs text-slate-400",children:"No image"})}),e.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:[e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:()=>H.current?.click(),className:"gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Upload image"]}),A?e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(""),children:"Remove"}):null,e.jsx("span",{className:"text-xs text-slate-500",children:"JPG, PNG, or WEBP up to 5MB."})]}),e.jsx("input",{ref:H,type:"file",accept:"image/*",className:"hidden",onChange:async C=>{const T=C.target.files?.[0];T&&(await ae(T),C.target.value="")}})]}),L?e.jsx("div",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs text-red-600",children:L}):null]}):null,w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Sender"}),e.jsxs(ye,{value:f,onValueChange:n,children:[e.jsx(xe,{children:e.jsx(Ne,{placeholder:"Select sender"})}),e.jsx(ue,{children:s.map(C=>e.jsx(W,{value:C.id,children:C.name},C.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Timestamp"}),e.jsx(Y,{type:"datetime-local",value:g,onChange:C=>k(C.target.value)})]})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Type"}),e.jsxs(ye,{value:S,onValueChange:C=>{const T=C;R(T),T!=="image"&&z(null)},children:[e.jsx(xe,{children:e.jsx(Ne,{placeholder:"Select type"})}),e.jsxs(ue,{children:[e.jsx(W,{value:"text",children:"Text"}),e.jsx(W,{value:"system",children:"System"}),e.jsx(W,{value:"image",children:"Image"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Status"}),e.jsxs(ye,{value:D,onValueChange:C=>u(C),children:[e.jsx(xe,{children:e.jsx(Ne,{placeholder:"Select status"})}),e.jsxs(ue,{children:[e.jsx(W,{value:"sent",children:"Sent"}),e.jsx(W,{value:"delivered",children:"Delivered"}),e.jsx(W,{value:"read",children:"Read"})]})]})]})]})]}):null,e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(d,{type:"submit",disabled:S==="image"&&!A,onClick:()=>{S==="image"&&!A&&z("Please upload an image for this message.")},children:l??(a?"Save changes":"Add message")}),a?e.jsx(d,{type:"button",variant:"ghost",onClick:p,children:"Cancel"}):null,M?e.jsx(d,{type:"button",variant:"ghost",onClick:x,children:m?"Hide advanced":"Advanced"}):null]})]})},Ws=b.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:v("h-px w-full bg-slate-200",s),...a}));Ws.displayName="Separator";const Ca=s=>{const a=new Date(s);if(Number.isNaN(a.getTime()))return"";const t=a.getTimezoneOffset()*6e4;return new Date(a.getTime()-t).toISOString().slice(0,10)},Sa=({message:s,onEdit:a,onDelete:t,isActionsOpen:r,onToggleActions:i})=>{const{attributes:l,listeners:m,setNodeRef:x,transform:c,isDragging:p}=Xt({id:s.id,animateLayoutChanges:()=>!1}),I=!!s.isHidden,y={transform:ea.Transform.toString(c),transition:"none"};return e.jsxs("div",{ref:x,style:y,className:v("flex items-center gap-3 rounded-xl border border-slate-200 bg-white px-3 py-2 shadow-sm hover:bg-slate-50",I&&"bg-slate-50 text-slate-500",p&&"ring-2 ring-slate-900/20"),children:[e.jsx(d,{variant:"ghost",size:"icon",className:"hidden cursor-grab sm:inline-flex",...l,...m,children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:v("text-sm font-medium break-words whitespace-normal sm:truncate",I?"text-slate-500":"text-slate-900"),title:s.content,children:s.content}),e.jsxs("div",{className:"text-xs text-slate-500",children:[s.type," - ",He(s.timestamp)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{variant:"ghost",size:"icon",onClick:a,children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Edit"})]}),e.jsxs(Je,{children:[e.jsx(Qe,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"icon",className:"hidden sm:inline-flex",onClick:t,children:e.jsx(Re,{className:"h-4 w-4"})})}),e.jsx(Me,{children:"Delete"})]}),e.jsxs(d,{variant:"ghost",size:"icon",className:v(r&&"bg-slate-100"),onClick:i,children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More actions"})]})]})]})},ka=()=>{const s=N(h=>h.conversation.messages),a=N(h=>h.conversation.participants),t=N(h=>h.activeParticipantId),r=N(h=>h.addMessage),i=N(h=>h.updateMessage),l=N(h=>h.deleteMessage),m=N(h=>h.duplicateMessage),x=N(h=>h.setMessages),[c,p]=b.useState(null),[I,y]=b.useState(null),[f,n]=b.useState(!1),[g,k]=b.useState(!1),[S,R]=b.useState("standard"),[D,u]=b.useState(""),[A,j]=b.useState(null),[L,z]=b.useState(null),w=b.useRef(null),{globalDate:M,hasMixedDates:E}=b.useMemo(()=>{if(s.length===0)return{globalDate:"",hasMixedDates:!1};const h=s.map(o=>Ca(o.timestamp)),O=new Set(h);return{globalDate:O.size===1?h[0]:"",hasMixedDates:O.size>1}},[s]),Q=Wt(ls(_t,{activationConstraint:{distance:8}}),ls(qt,{activationConstraint:{delay:150,tolerance:5}})),H=({transform:h})=>({...h,x:0}),G=(h,O)=>{const o=s.findIndex(P=>P.id===h),U=o+O;o===-1||U<0||U>=s.length||x(os(s,o,U))},ce=h=>{if(!h||s.length===0)return;const O=new Date(`${h}T00:00`);Number.isNaN(O.getTime())||x(s.map(o=>{const U=new Date(o.timestamp);if(Number.isNaN(U.getTime()))return o;const P=new Date(U);return P.setFullYear(O.getFullYear(),O.getMonth(),O.getDate()),{...o,timestamp:P.toISOString()}}))},ae=()=>{const h=a[0]?.id??"";return t?a.find(O=>O.id!==t)?.id??h:h},C=(h,O="success")=>{z({message:h,tone:O}),w.current&&window.clearTimeout(w.current),w.current=window.setTimeout(()=>{z(null),w.current=null},2400)};b.useEffect(()=>()=>{w.current&&window.clearTimeout(w.current)},[]);const T=()=>s.map(h=>`${h.senderId===t?"<":">"} ${h.content}`).join(`
`),J=h=>{p(null),y(null),j(null),h==="easy"&&u(T()),R(h)},ee=()=>{const h=ae();if(!t||!h){j("Add at least two participants to use easy mode."),C("Add at least two participants to use easy mode.","error");return}const O=D.split(`
`),o=[];let U=!1;if(O.forEach(K=>{const V=K.trim();if(!V)return;const q=V[0];if(q!=="<"&&q!==">"){o.length?o[o.length-1].content+=`
${V}`:U=!0;return}const de=V.slice(1).trim();if(!de)return;const me=q==="<"?t:h;o.push({senderId:me,content:de})}),U||o.length===0){j("Use < or > at the start of each message line."),C("Use < or > at the start of each message line.","error");return}const P=Date.now(),$=o.map((K,V)=>{const q=s[V];return q?{...q,senderId:K.senderId,content:K.content}:{id:ke(),senderId:K.senderId,content:K.content,timestamp:new Date(P+V*1e3).toISOString(),type:"text",status:"sent"}});x($),j(null),C("Easy changes applied.")},Z=s.some(h=>h.isHidden),Ie=s.some(h=>!h.isHidden),pe=a.find(h=>h.id===t),fe=a.find(h=>h.id===ae());return e.jsxs(Gs,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Conversation Builder"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Add messages, drag to reorder, or switch to Easy mode for bulk edits."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Messages"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-slate-500",children:[s.length," total"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx(F,{className:"text-[10px] uppercase text-slate-400",children:"Global date"}),e.jsx(Y,{type:"date",value:M,onChange:h=>ce(h.target.value),className:"h-8 w-[145px] text-xs",disabled:s.length===0}),e.jsx("span",{className:"text-xs text-slate-400",children:E?"Mixed dates":"Keeps time-of-day"})]}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(s.map(h=>({...h,isHidden:!0}))),disabled:!Ie,children:"Hide all"}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(s.map(h=>({...h,isHidden:!1}))),disabled:!Z,children:"Show all"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-semibold uppercase text-slate-400",children:"Editor view"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Switch between the list and easy text editor."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(d,{type:"button",size:"sm",variant:S==="standard"?"default":"outline",onClick:()=>J("standard"),children:"Standard"}),e.jsx(d,{type:"button",size:"sm",variant:S==="easy"?"default":"outline",onClick:()=>J("easy"),children:"Easy"})]})]}),S==="easy"?e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx(F,{className:"text-xs uppercase text-slate-400",children:"Easy editor"}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(T()),children:"Refresh"})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(ts,{value:D,onChange:h=>{u(h.target.value),A&&j(null)},placeholder:`< ${pe?.name??"Sender"} message
> ${fe?.name??"Receiver"} message`,className:"min-h-[280px] resize-y"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[e.jsx("span",{className:"font-semibold",children:"<"})," = ",pe?.name??"Sender",","," ",e.jsx("span",{className:"font-semibold",children:">"})," = ",fe?.name??"Receiver",". New lines become new messages, timestamps default to now."]}),A?e.jsx("div",{className:"rounded-lg bg-red-50 px-3 py-2 text-xs text-red-600",children:A}):null]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(d,{type:"button",onClick:ee,children:"Apply changes"}),e.jsx(d,{type:"button",variant:"ghost",onClick:()=>{u(""),j(null)},children:"Clear"})]})]}):e.jsxs(e.Fragment,{children:[s.length===0?e.jsx("div",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center text-xs text-slate-500",children:"No messages yet. Add the first entry above."}):null,e.jsx(Yt,{sensors:Q,collisionDetection:Jt,modifiers:[H],onDragEnd:({active:h,over:O})=>{if(!O||h.id===O.id)return;const o=s.findIndex(P=>P.id===h.id),U=s.findIndex(P=>P.id===O.id);o===-1||U===-1||x(os(s,o,U))},children:e.jsx(Qt,{items:s.map(h=>h.id),strategy:Kt,children:e.jsx("div",{className:"space-y-2",children:s.map(h=>{const O=s[0]?.id!==h.id,o=s[s.length-1]?.id!==h.id,U=I===h.id;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Sa,{message:h,onEdit:()=>{p(h.id),n(!1),y(null)},onToggleVisibility:()=>i(h.id,{isHidden:!h.isHidden}),onDuplicate:()=>{m(h.id),y(null)},onDelete:()=>{l(h.id),y(null)},isActionsOpen:U,onToggleActions:()=>y(P=>P===h.id?null:h.id)}),U?e.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:hidden",children:[e.jsxs(d,{variant:"ghost",size:"icon",onClick:()=>G(h.id,-1),disabled:!O,children:[e.jsx(Ut,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Move up"})]}),e.jsxs(d,{variant:"ghost",size:"icon",onClick:()=>G(h.id,1),disabled:!o,children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Move down"})]})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>{i(h.id,{isHidden:!h.isHidden}),y(null)},children:[h.isHidden?e.jsx(Us,{className:"h-4 w-4"}):e.jsx(Es,{className:"h-4 w-4"}),h.isHidden?"Show in chat":"Hide from chat"]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>{m(h.id),y(null)},children:[e.jsx(Os,{className:"h-4 w-4"}),"Duplicate"]}),e.jsxs(d,{variant:"ghost",size:"sm",className:"sm:hidden",onClick:()=>{l(h.id),y(null)},children:[e.jsx(Re,{className:"h-4 w-4"}),"Delete"]})]}):null,c===h.id?e.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:e.jsx(bs,{participants:a,initial:h,defaultSenderId:t,compact:!0,advancedOpen:f,onToggleAdvanced:()=>n(P=>!P),onSubmit:P=>{i(h.id,P),p(null)},onCancel:()=>p(null),submitLabel:"Save changes"},h.id)}):null]},h.id)})})})})]})]}),S==="standard"?e.jsxs(e.Fragment,{children:[e.jsx(Ws,{}),e.jsxs("div",{className:"space-y-3",children:[g?e.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-3",children:e.jsx(bs,{participants:a,initial:null,defaultSenderId:t,compact:!0,resetOnSubmit:!0,onSubmit:h=>{r(h)},submitLabel:"Add message"},"new")}):null,e.jsx(d,{type:"button",className:"w-full",variant:g?"outline":"default",onClick:()=>k(h=>!h),children:g?"Hide add message":"Add message"})]})]}):null]}),L?e.jsx("div",{className:"pointer-events-none fixed top-5 left-1/2 z-50 w-[90%] -translate-x-1/2 sm:w-auto","aria-live":"polite",children:e.jsx("div",{className:v("rounded-full px-4 py-2 text-sm font-medium shadow-lg",L.tone==="success"?"bg-emerald-500 text-white":"bg-red-600 text-white"),children:L.message})}):null]})},Aa=({selectedId:s,onSelect:a})=>e.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:es.map(t=>e.jsxs(d,{variant:t.id===s?"default":"outline",className:v("flex h-auto items-start justify-between gap-2 px-3 py-2 text-left"),onClick:()=>a(t),children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:t.label}),e.jsxs("div",{className:"text-xs opacity-70",children:[t.width," x ",t.height]})]}),e.jsx("span",{className:"rounded-full bg-white/20 px-2 py-0.5 text-[0.65rem] uppercase tracking-wide",children:t.hint})]},t.id))}),Pa=3e3,Ta=2e4,Ma=(s,a,t)=>new Promise((r,i)=>{const l=window.setTimeout(()=>i(new Error(t)),a);s.then(m=>{window.clearTimeout(l),r(m)}).catch(m=>{window.clearTimeout(l),i(m)})}),Ys=async(s,a,t)=>{const r=Array.from(s.querySelectorAll("img"));await Promise.all(r.map(c=>(c.loading==="lazy"&&(c.loading="eager"),c.decoding="async",c.complete&&c.naturalWidth>0||c.complete&&!c.decode?Promise.resolve():new Promise(p=>{let I=!1,y=0;const f=()=>{I||(I=!0,window.clearTimeout(y),c.removeEventListener("load",f),c.removeEventListener("error",f),p())};y=window.setTimeout(f,Pa),c.addEventListener("load",f),c.addEventListener("error",f),c.decode&&c.decode().then(f).catch(f)}))));const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",l=t?`translate(${-t.x}px, ${-t.y}px) scale(1)`:"scale(1)",m={width:a.width,height:a.height,pixelRatio:a.scale,cacheBust:!0,useCORS:!0,imagePlaceholder:i,style:{transform:l,transformOrigin:"top left",width:`${a.width}px`,height:`${a.height}px`,"--chat-radius":"0px"}},x=a.format==="jpeg"?sa(s,{...m,quality:a.quality}):ta(s,m);return Ma(x,Ta,"Export timed out")},Ra=({targetRef:s,getExportOffset:a})=>{const t=N(j=>j.exportSettings),r=N(j=>j.setExportSettings),[i,l]=b.useState(!1),[m,x]=b.useState(!0),[c,p]=b.useState(null),[I,y]=b.useState(""),[f,n]=b.useState(null),[g,k]=b.useState(!1),[S,R]=b.useState(!1),D=b.useMemo(()=>es.find(j=>j.id===t.presetId),[t.presetId]),u=async j=>{if(!s.current)return;const L=`chat-export.${t.format==="jpeg"?"jpg":"png"}`;j==="preview"&&(y(L),p(null),n(null),k(!0),R(!0)),l(!0);try{const z=a?.(),w=await Ys(s.current,t,z);if(j==="preview"){p(w);return}const M=document.createElement("a");M.href=w,M.download=L,M.click()}catch(z){if(console.error("Export failed",z),j==="preview"){const w=z instanceof Error?z.message:"Unknown error";n(w)}}finally{l(!1),j==="preview"&&k(!1)}},A=`${t.width} x ${t.height} - ${t.scale}x - ${t.format.toUpperCase()}`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Export"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Set size, format, and quality before exporting."})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>x(!m),children:m?"Collapse":"Expand"})]}),m?e.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:A})]}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>navigator.clipboard.writeText(A),children:e.jsx(Os,{className:"h-4 w-4"})})]})}):null,e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{children:"Device presets"}),e.jsx(Aa,{selectedId:t.presetId,onSelect:j=>r({presetId:j.id,width:j.width,height:j.height})})]}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Custom width"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(Y,{type:"number",min:240,value:t.width,onChange:j=>r({presetId:"custom",width:Number(j.target.value)}),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Custom height"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(Y,{type:"number",min:240,value:t.height,onChange:j=>r({presetId:"custom",height:Number(j.target.value)}),className:"pl-9"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Quality"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[1,2,3].map(j=>e.jsxs(d,{variant:t.scale===j?"default":"outline",onClick:()=>r({scale:j}),children:[j,"x"]},j))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Format"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:t.format==="png"?"default":"outline",onClick:()=>r({format:"png"}),children:"PNG"}),e.jsx(d,{variant:t.format==="jpeg"?"default":"outline",onClick:()=>r({format:"jpeg"}),children:"JPEG"})]})]}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>u("preview"),disabled:i,children:[i?e.jsx(ns,{className:"h-4 w-4 animate-spin"}):e.jsx(Be,{className:"h-4 w-4"}),"Preview"]}),e.jsxs(d,{onClick:()=>u("download"),disabled:i,children:[i?e.jsx(ns,{className:"h-4 w-4 animate-spin"}):e.jsx(Ze,{className:"h-4 w-4"}),"Download"]})]}),e.jsx(he,{open:S,onOpenChange:j=>{R(j),j||(p(null),n(null),k(!1))},children:e.jsxs(ie,{className:"w-[94vw] max-w-5xl",children:[e.jsxs(ne,{children:[e.jsx(le,{children:"Export preview"}),e.jsx(oe,{children:A})]}),g?e.jsx("div",{className:"text-sm text-slate-500",children:"Rendering preview..."}):null,f?e.jsxs("div",{className:"text-sm text-red-600",children:["Export failed: ",f]}):null,c?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:c,alt:I||"Export preview",className:"max-h-[70vh] w-full rounded-xl border border-slate-200 bg-slate-50 object-contain"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Right click the image to save."})]}):null]})}),D?e.jsxs("p",{className:"text-xs text-slate-500",children:["Preset: ",D.label," - ",D.width," x ",D.height]}):e.jsx("p",{className:"text-xs text-slate-500",children:"Custom size active."})]})},Js=()=>{const s=N(i=>i.layoutId),a=N(i=>i.themeId),t=N(i=>i.setLayout),r=N(i=>i.setTheme);return e.jsxs(ye,{value:s,onValueChange:i=>{const l=i;t(l);const m=_.find(c=>c.id===l)??_[0],x=m.themes.find(c=>c.id===a)?.id??m.themes[0]?.id??"light";r(x)},children:[e.jsx(xe,{className:"w-full sm:w-[200px]",children:e.jsx(Ne,{placeholder:"Select layout"})}),e.jsx(ue,{children:_.map(i=>e.jsx(W,{value:i.id,children:i.name},i.id))})]})},Qs=b.forwardRef(({className:s,...a},t)=>e.jsxs(Ds,{ref:t,className:v("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(vt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-slate-200",children:e.jsx(jt,{className:"absolute h-full bg-slate-900"})}),e.jsx(wt,{className:"block h-4 w-4 rounded-full border border-slate-900/20 bg-white shadow transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400"})]}));Qs.displayName=Ds.displayName;const Da=()=>{const s=N(u=>u.layoutId),a=N(u=>u.themeId),t=N(u=>u.setTheme),r=N(u=>u.ui),i=N(u=>u.setUi),l=N(u=>u.conversation),m=N(u=>u.setGroupName),x=N(u=>u.backgroundImageUrl),c=N(u=>u.backgroundImageOpacity),p=N(u=>u.setBackgroundImageUrl),I=N(u=>u.setBackgroundImageOpacity),y=N(u=>u.clearBackgroundImage),f=N(u=>u.backgroundColor),n=N(u=>u.setBackgroundColor),g=l.participants.length>2,k=Bs(l),S=_.find(u=>u.id===s)??_[0],R=S.themes.some(u=>u.id==="dark"),D=a==="dark";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Appearance & Preview"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Control layout, theme, and preview behavior."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Layout"}),e.jsx(Js,{})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:g?"Group name":"Conversation"}),g?e.jsx(Y,{value:l.groupName??"",onChange:u=>m(u.target.value),placeholder:"Enter group name"}):e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-600",children:k})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Theme"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Switch between light and dark."})]}),e.jsx(te,{checked:D,onCheckedChange:u=>t(u&&R?"dark":"light"),disabled:!R})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Chrome"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Show header and input bar."})]}),e.jsx(te,{checked:r.showChrome,onCheckedChange:u=>i({showChrome:u})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Zoom"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>i({zoom:X(r.zoom-.1,.5,2)}),children:[e.jsx(Ls,{className:"h-4 w-4"}),"Zoom out"]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>i({zoom:X(r.zoom+.1,.5,2)}),children:[e.jsx(re,{className:"h-4 w-4"}),"Zoom in"]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>i({zoom:1}),children:[e.jsx(Fs,{className:"h-4 w-4"}),"Reset"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Auto-fit preview"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Scale to fit the preview panel."})]}),e.jsx(te,{checked:r.autoFit,onCheckedChange:u=>i({autoFit:u})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Background image"}),e.jsxs("div",{className:"space-y-3 rounded-xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"grid gap-3 sm:grid-cols-[120px_1fr]",children:[e.jsx("div",{className:"h-24 w-full overflow-hidden rounded-lg border border-slate-200 bg-slate-100",children:x?e.jsx("img",{src:x,alt:"Background preview",className:"h-full w-full object-cover"}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-1 text-xs text-slate-400",children:[e.jsx(se,{className:"h-4 w-4"}),"No image"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{asChild:!0,variant:"outline",className:"w-full justify-center gap-2",children:e.jsxs("label",{htmlFor:"bg-upload",className:"flex cursor-pointer items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Upload image"]})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Uploads only (best for exports)"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:y,disabled:!x,children:"Clear"})]}),e.jsx("input",{id:"bg-upload",type:"file",accept:"image/*",className:"hidden",onChange:async u=>{const A=u.target.files?.[0];if(A){try{const j=await Te(A);p(j)}catch(j){console.error("Failed to read background file",j)}u.target.value=""}}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-xs",children:"Background opacity"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qs,{min:0,max:100,step:1,value:[Math.round(c*100)],onValueChange:u=>I(X(Number(u[0])/100,0,1)),className:"flex-1",disabled:!x}),e.jsx(Y,{type:"number",min:0,max:100,value:Math.round(c*100),onChange:u=>I(X(Number(u.target.value)/100,0,1)),className:"w-20",disabled:!x})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Background color"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 rounded-xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Fill"})]}),e.jsx(Y,{type:"color",value:f||S.themes.find(u=>u.id===a)?.colors.background||"#ffffff",onChange:u=>n(u.target.value),className:"h-10 w-14 p-1"}),e.jsx(Y,{type:"text",value:f,onChange:u=>n(u.target.value),placeholder:S.themes.find(u=>u.id===a)?.colors.background||"#ffffff",className:"max-w-[180px]"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>n(""),disabled:!f,children:"Reset"})]})]})]})},Ae=b.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:v("rounded-xl border border-slate-200 bg-white shadow-sm",s),...a}));Ae.displayName="Card";const Ks=b.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:v("p-4 pb-2",s),...a}));Ks.displayName="CardHeader";const Pe=b.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:v("p-4 pt-2",s),...a}));Pe.displayName="CardContent";const za=b.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:v("p-4 pt-0",s),...a}));za.displayName="CardFooter";const Ua=()=>{const s=b.useRef(null),a=b.useRef(null),t=b.useRef(null),[r,i]=b.useState(1),l=N(o=>o.conversation),m=N(o=>o.layoutId),x=N(o=>o.themeId),c=N(o=>o.activeParticipantId),p=N(o=>o.backgroundImageUrl),I=N(o=>o.backgroundImageOpacity),y=N(o=>o.backgroundColor),f=N(o=>o.ui),n=N(o=>o.setUi),g=N(o=>o.exportSettings),k=N(o=>o.setExportSettings),S=N(o=>o.setTheme),[R,D]=b.useState(!1),[u,A]=b.useState(null),[j,L]=b.useState(null),[z,w]=b.useState(!1),[M,E]=b.useState(!1),Q=async o=>{if(!s.current)return;const U=`chat-export.${g.format==="jpeg"?"jpg":"png"}`;o==="preview"&&(A(null),L(null),w(!0),E(!0)),D(!0);try{const P=await Ys(s.current,g,ee());if(o==="preview"){A(P);return}const $=document.createElement("a");$.href=P,$.download=U,$.click()}catch(P){if(console.error("Quick export failed",P),o==="preview"){const $=P instanceof Error?P.message:"Unknown error";L($)}}finally{D(!1),o==="preview"&&w(!1)}},H=_.find(o=>o.id===m)??_[0],G=b.useMemo(()=>H.themes.find(o=>o.id===x)??H.themes[0],[H,x]),ce=H.themes.some(o=>o.id==="dark"),ae=x==="dark";b.useEffect(()=>{if(typeof window>"u")return;window.matchMedia("(max-width: 1023px)").matches&&n({activeView:"preview",isSidebarOpen:!1})},[n]),b.useEffect(()=>{const o=a.current;if(!o)return;const U=()=>{const K=o.getBoundingClientRect(),V=window.getComputedStyle(o),q=parseFloat(V.paddingLeft||"0")+parseFloat(V.paddingRight||"0"),de=parseFloat(V.paddingTop||"0")+parseFloat(V.paddingBottom||"0"),me=K.width-q,Ce=K.height-de;if(!me||!Ce)return;const De=me/g.width,ze=Ce/g.height,ge=Math.min(De,ze,1);i(ge>0?ge:1)},P=requestAnimationFrame(U),$=new ResizeObserver(()=>requestAnimationFrame(U));return $.observe(o),()=>{cancelAnimationFrame(P),$.disconnect()}},[g.width,g.height,f.activeView,f.autoFit]),b.useEffect(()=>{(f.activeView==="preview"||!f.isSidebarOpen)&&n({activeView:"editor",isSidebarOpen:!0})},[n,f.activePanel]);const C=X((f.autoFit?r:1)*f.zoom,.1,2),T=g.width*C,J=g.height*C,ee=()=>{const o=t.current,U=s.current;if(!o||!U||C===0)return{x:0,y:0};const P=o.getBoundingClientRect(),$=U.getBoundingClientRect(),K=P.left-$.left,V=P.top-$.top,q=K/C,de=V/C,me=o.clientWidth/C,Ce=o.clientHeight/C,De=Math.max(0,g.width-me),ze=Math.max(0,g.height-Ce),ge=X(q,0,De),as=X(de,0,ze);return{x:Number.isFinite(ge)?ge:0,y:Number.isFinite(as)?as:0}},Z=[{id:"participants",label:"Participants",icon:Ht,description:"Add people, avatars, and presence details.",meta:`${l.participants.length} people`},{id:"messages",label:"Messages",icon:Gt,description:"Write, reorder, and time the chat flow.",meta:`${l.messages.length} messages`},{id:"settings",label:"Appearance",icon:Vt,description:"Pick layout, theme, and background polish.",meta:`${H.name} ${G.name}`},{id:"export",label:"Export",icon:Ze,description:"Set size, format, and download exports.",meta:`${g.width} x ${g.height}`}],Ie=Z.findIndex(o=>o.id===f.activePanel),pe=Ie===-1?0:Ie,fe=Z[pe]??Z[0],h=new Set(["iphone-14-pro","ipad","desktop"]),O=es.filter(o=>h.has(o.id));return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-white to-slate-200",children:[e.jsxs("div",{className:"mx-auto flex flex-col gap-6 px-4 pt-6 pb-24 lg:pb-6",children:[e.jsx(ja,{}),e.jsx(Ae,{children:e.jsxs(Pe,{className:"space-y-3 py-4",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Workflow"}),e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["Step ",pe+1," of ",Z.length,": ",fe.label]}),e.jsx("p",{className:"text-xs text-slate-500",children:fe.description})]})}),e.jsx("div",{className:"grid gap-2 sm:grid-cols-4",children:Z.map(o=>{const U=o.icon,P=f.activePanel===o.id;return e.jsxs("button",{type:"button",onClick:()=>n({activePanel:o.id,activeView:"editor",isSidebarOpen:!0}),className:v("flex w-full items-center gap-2 rounded-xl border px-3 py-2 text-left text-sm transition",P?"border-slate-900 bg-slate-900 text-white shadow-sm":"border-slate-200 bg-white text-slate-700 hover:border-slate-300 hover:bg-slate-50"),children:[e.jsx("span",{className:v("flex h-7 w-7 items-center justify-center rounded-lg text-xs font-semibold",P?"bg-white/15 text-white":"bg-slate-100 text-slate-500"),children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("span",{className:"font-medium",children:o.label})]},o.id)})})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(320px,420px)_1fr]",children:[e.jsx("aside",{className:v("space-y-6",f.isSidebarOpen&&f.activeView!=="preview"?"block":"hidden"),children:e.jsx(Ae,{children:e.jsxs(Pe,{className:"space-y-6",children:[f.activePanel==="participants"?e.jsx(Na,{}):null,f.activePanel==="messages"?e.jsx(ka,{}):null,f.activePanel==="settings"?e.jsx(Da,{}):null,f.activePanel==="export"?e.jsx(Ra,{targetRef:s,getExportOffset:ee}):null]})})}),e.jsx("main",{className:v("space-y-4",f.activeView==="editor"&&"hidden lg:block"),children:e.jsxs(Ae,{children:[e.jsxs(Ks,{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Preview canvas"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Live view of your layout and message flow."})]}),e.jsxs("div",{className:"flex w-full items-center gap-2 overflow-x-auto pb-1 sm:w-auto sm:flex-wrap",children:[e.jsx(d,{variant:"outline",size:"sm",className:"hidden lg:inline-flex",onClick:()=>n({isSidebarOpen:!f.isSidebarOpen,activeView:f.isSidebarOpen?"preview":"editor"}),children:f.isSidebarOpen?"Focus preview":"Show editor"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n({showChrome:!f.showChrome}),children:[f.showChrome?e.jsx(Us,{className:"h-4 w-4"}):e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:f.showChrome?"Hide chrome":"Show chrome"})]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n({zoom:X(f.zoom-.1,.5,2)}),children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Zoom out"})]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n({zoom:X(f.zoom+.1,.5,2)}),children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Zoom in"})]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>n({zoom:1}),children:[e.jsx(Fs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[e.jsx($t,{className:"h-4 w-4"}),"Zoom ",Math.round(C*100),"%",f.autoFit?" (auto-fit)":""," - Export size ",g.width," x ",g.height]})]}),e.jsxs(Pe,{children:[e.jsx("div",{ref:a,className:"flex h-[60vh] items-center justify-center rounded-3xl border border-dashed border-slate-200 bg-slate-50 p-4 lg:h-[70vh]",children:e.jsx("div",{ref:t,className:"hide-scrollbar flex h-full w-full items-start justify-start overflow-auto",children:e.jsx("div",{className:"relative m-auto",style:{width:T,height:J},children:e.jsx("div",{className:"absolute left-0 top-0",style:{width:g.width,height:g.height,transform:`scale(${C})`,transformOrigin:"top left"},children:e.jsx("div",{ref:s,className:"h-full w-full",style:{width:g.width,height:g.height},children:e.jsx(ua,{conversation:l,layout:H,theme:G,showChrome:f.showChrome,activeParticipantId:c,backgroundImageUrl:p,backgroundImageOpacity:I,backgroundColor:y})})})})})}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Layout"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsx("div",{className:"w-full sm:w-auto",children:e.jsx(Js,{})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 rounded-full bg-slate-100 px-3 py-1 sm:justify-start",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Theme"}),e.jsx(te,{checked:ae,onCheckedChange:o=>S(o&&ce?"dark":"light"),disabled:!ce}),e.jsx("span",{className:"text-xs text-slate-500",children:ae?"Dark":"Light"})]})]})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>n({activePanel:"settings",activeView:"editor",isSidebarOpen:!0}),children:"More settings"})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Quick download"}),e.jsx("div",{className:"-mx-1 flex flex-nowrap gap-2 overflow-x-auto px-1 pb-1 sm:flex-wrap sm:overflow-visible sm:px-0",children:O.map(o=>e.jsx(d,{variant:g.presetId===o.id?"default":"outline",size:"sm",onClick:()=>k({presetId:o.id,width:o.width,height:o.height}),children:o.label},o.id))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[[1,2,3].map(o=>e.jsxs(d,{variant:g.scale===o?"default":"outline",size:"sm",onClick:()=>k({scale:o}),children:[o,"x"]},o)),e.jsxs(d,{variant:"outline",size:"lg",className:"gap-2",disabled:R,onClick:()=>Q("preview"),children:[e.jsx(Be,{className:"h-4 w-4"}),"Preview"]}),e.jsxs(d,{size:"lg",className:"gap-2",disabled:R,onClick:()=>Q("download"),children:[e.jsx(Ze,{className:"h-4 w-4"}),"Download"]})]})]}),e.jsx(he,{open:M,onOpenChange:o=>{E(o),o||(A(null),L(null),w(!1))},children:e.jsxs(ie,{className:"w-[94vw] max-w-5xl",children:[e.jsxs(ne,{children:[e.jsx(le,{children:"Export preview"}),e.jsxs(oe,{children:[g.width," x ",g.height," - ",g.scale,"x -"," ",g.format.toUpperCase()]})]}),z?e.jsx("div",{className:"text-sm text-slate-500",children:"Rendering preview..."}):null,j?e.jsxs("div",{className:"text-sm text-red-600",children:["Export failed: ",j]}):null,u?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:u,alt:"Quick export preview",className:"max-h-[70vh] w-full rounded-xl border border-slate-200 bg-slate-50 object-contain"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Right click the image to save."})]}):null]})})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[e.jsx(d,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:"https://github.com/quead/chat-message-simulator",target:"_blank",rel:"noreferrer",children:"GitHub"})}),e.jsxs(he,{children:[e.jsx(Ke,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",children:"Terms and Conditions"})}),e.jsxs(ie,{className:"max-h-[80vh] overflow-y-auto",children:[e.jsxs(ne,{children:[e.jsx(le,{children:"Terms and Conditions"}),e.jsx(oe,{children:"By using this app, you agree to these terms."}),e.jsx("div",{className:"text-xs text-slate-500",children:"Last updated: 2026-01-03 | Version: 2026-01-03"})]}),e.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"What this app does"}),e.jsx("p",{children:"This app lets you compose chat mockups, preview layouts, and export images. All processing happens in your browser."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Data handling and GDPR"}),e.jsx("p",{children:"We do not collect, store, or process personal data on our servers. Your edits and autosaves stay in your browser's local storage. You can delete them using Clear or by clearing site data in your browser."}),e.jsx("p",{children:"We do not run analytics or tracking cookies. Because your content does not leave your device, there is no server-side data controller or processor for your content. If you contact us, we will only use your email to respond."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Third-party resources"}),e.jsx("p",{children:"The app may load fonts or default avatar images from third-party providers. Those providers may receive standard request data such as IP address and user agent. You can replace assets or block network requests if needed."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Your content"}),e.jsx("p",{children:"You are responsible for the content you enter and export. Do not include sensitive data unless you are comfortable storing it locally. Only use content and assets you have the rights to use."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"No warranties"}),e.jsx("p",{children:'The app is provided "as is" and "as available" without any warranties, express or implied, including accuracy, reliability, availability, or fitness for a particular purpose. Use the app at your own risk.'})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Limitation of liability"}),e.jsx("p",{children:"To the maximum extent permitted by law, we are not liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of data, profits, or business interruption. Our total liability is limited to the amount you paid for the app, which is zero."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Governing law"}),e.jsx("p",{children:"These terms are governed by the laws of Romania. Any disputes are subject to the exclusive jurisdiction of the courts in Romania."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Contact"}),e.jsx("p",{children:"Questions about these terms or GDPR? Email: queadx@gmail.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Changes"}),e.jsx("p",{children:"We may update these terms from time to time. Continued use means you accept the updated terms."})]})]})]})]}),e.jsxs(he,{children:[e.jsx(Ke,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",children:"Privacy Policy"})}),e.jsxs(ie,{className:"max-h-[80vh] overflow-y-auto",children:[e.jsxs(ne,{children:[e.jsx(le,{children:"Privacy Policy"}),e.jsx(oe,{children:"This policy explains how data is handled in the app."}),e.jsx("div",{className:"text-xs text-slate-500",children:"Last updated: 2026-01-03 | Version: 2026-01-03"})]}),e.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Data we collect"}),e.jsx("p",{children:"We do not collect or store your chat content on our servers. Everything you create stays on your device."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Local storage"}),e.jsx("p",{children:"The app uses your browser's local storage to keep autosaves and settings. You can remove this data with Clear or by clearing site data in your browser."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Third-party requests"}),e.jsx("p",{children:"Fonts and default avatar images may be loaded from third-party services. Those providers may receive standard request data such as IP address and user agent. You can block or replace these resources if needed."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"GDPR readiness"}),e.jsx("p",{children:"Because your content does not leave your device, there is no server-side processing of personal data for the app. If you contact us, we only use your email to respond and do not share it."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Contact"}),e.jsx("p",{children:"Privacy questions? Email: queadx@gmail.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Changes"}),e.jsx("p",{children:"We may update this policy from time to time. Continued use means you accept the updated policy."})]})]})]})]})]})]}),e.jsxs("div",{className:"fixed bottom-4 left-1/2 z-50 flex -translate-x-1/2 items-center gap-3 rounded-full bg-white/90 px-4 py-2 shadow-lg backdrop-blur lg:hidden",children:[e.jsx("span",{className:v("text-xs font-semibold",f.activeView==="editor"?"text-slate-900":"text-slate-500"),children:"Edit"}),e.jsx(te,{checked:f.activeView==="preview",onCheckedChange:o=>n({activeView:o?"preview":"editor",isSidebarOpen:!o}),className:"h-8 w-14 bg-slate-200 data-[state=checked]:bg-slate-900",thumbClassName:"h-6 w-6 data-[state=checked]:translate-x-6"}),e.jsx("span",{className:v("text-xs font-semibold",f.activeView==="preview"?"text-slate-900":"text-slate-500"),children:"Live"})]})]})};function Ea(){return e.jsx(Ua,{})}_s.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(Ea,{})}));
